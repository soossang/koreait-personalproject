<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.koreait.PsnProject.dao.HospitalDAO">

    <select id="findByMemberId" parameterType="int" resultType="com.koreait.PsnProject.dto.HospitalDTO">
        SELECT * FROM hospital WHERE member_id = #{memberId} LIMIT 1
    </select>

    <insert id="insertHospital" parameterType="com.koreait.PsnProject.dto.HospitalDTO">
        INSERT INTO hospital (member_id, hospital_name, address, department, phone, doctor_count, description, latitude, longitude)
        VALUES (#{memberId}, #{hospitalName}, #{address}, #{department}, #{phone}, #{doctorCount}, #{description}, #{latitude}, #{longitude})
    </insert>

    <select id="getAllHospitals" resultType="com.koreait.PsnProject.dto.HospitalDTO">
        SELECT
            id, member_id as memberId, hospital_name as hospitalName, address, department, phone,
            doctor_count as doctorCount, description, avg_rating as avgRating, latitude, longitude
        FROM hospital
        ORDER BY id DESC
    </select>

    <select id="getHospitalById" parameterType="long" resultType="com.koreait.PsnProject.dto.HospitalDTO">
        SELECT
            id, member_id as memberId, hospital_name as hospitalName, address, department, phone,
            doctor_count as doctorCount, description, avg_rating as avgRating, latitude, longitude
        FROM hospital
        WHERE id = #{id}
    </select>

    <update id="updateHospital" parameterType="com.koreait.PsnProject.dto.HospitalDTO">
        UPDATE hospital
        SET
            hospital_name=#{hospitalName},
            address=#{address},
            department=#{department},
            phone=#{phone},
            doctor_count=#{doctorCount},
            description=#{description},
            latitude=#{latitude},
            longitude=#{longitude}
            WHERE id=#{id} </update>

    <delete id="deleteHospital" parameterType="long">
        DELETE FROM hospital WHERE id = #{id}
    </delete>

    </mapper>